# 多线程高斯-勒让德算法高精度计算π

本项目实现了基于 Python `decimal` 库和多线程的高斯-勒让德算法，可高效并行计算任意位数的圆周率 π，具备实时进度条显示和线程数自定义等功能。

---

## 程序步骤与详细说明

### 1. 参数解析与进度显示

- 命令行参数支持指定：
  - `--digits`  结果保留的小数位数（默认1000）
  - `--threads` 参与计算的线程数（默认10）
- 程序启动后会在控制台动态显示每一轮计算进度、已估算位数、用时及进度条。

### 2. 高精度运算和并发

- 使用 `decimal.Decimal` 实现高精度浮点运算，精度由 `--digits` 控制。
- 每轮迭代用 `ThreadPoolExecutor` 并发计算 a_next 和 b_next（平方根用自定义高精度牛顿法支持多线程）。
- 迭代轮数采用经验公式自动估算（一般足够10~40轮，百万位只需约25轮）。

### 3. 高斯-勒让德算法核心

- 初始化变量 a, b, t, p
- 每轮并发计算 a_next = (a+b)/2，b_next = sqrt(a*b)
- 更新 t, a, b, p
- 记录和展示进度
- 迭代结束后计算 π = (a + b)^2 / (4 * t)
- π 的字符串结果自动截断到 `digits` 位

### 4. 进度条与多线程展示

- 独立线程每0.2秒刷新一次进度条，显示迭代次数、线程数、已估算位数、用时与进度

### 5. 结果输出

- 完成后输出总用时与 π 的高精度结果

---

## 使用方法

### 安装依赖

本程序仅依赖 Python 标准库，无需额外安装第三方包。

### 运行示例

```bash
python gauss_legendre_pi_multithread.py --digits 10000 --threads 8
```

- 计算 π 的前 10000 位小数，使用 8 线程加速

### 参数说明

| 参数         | 说明                     | 默认值 |
| ------------ | ------------------------ | ------ |
| --digits     | π 的小数位数             | 1000   |
| --threads    | 并发线程数               | 10     |

---

## 注意事项

- 线程数过多可能带来上下文切换开销，推荐设置为 CPU 核心数
- 精度极高时建议适当提升线程数以加速
- 不建议在低内存设备上用极高精度和高线程数

---

## 算法简介

高斯-勒让德算法是一种快速收敛的π值算法，单轮迭代精度倍增，适合高精度数学常数计算。

---

## 参考

- [高斯-勒让德算法（百度百科）](https://baike.baidu.com/item/%E9%AB%98%E6%96%AF-%E5%8B%92%E8%AE%A9%E5%BE%B7%E7%AE%97%E6%B3%95/6715813)
- [Python decimal — Decimal fixed point and floating point arithmetic](https://docs.python.org/3/library/decimal.html)

---

如需批量保存、结果文件输出等扩展功能，欢迎提交 issue！